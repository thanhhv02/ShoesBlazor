@page "/listOrderDetails/{orderId}"

@inject IOrderService OrderService
@inject IProductService ProductService

@*<div class="row">
    <h2 class="ml-2 mt-4 mb-3 col-11" style="color:darkblue">Chi tiết đơn hàng</h2>
    <a href="/listOrder" class="btn btn-danger col-1 mt-4" style="height:40px;width:40px"><i class="oi oi-arrow-left"></i></a>
</div>


<div class="row mt-4 ml-3">
    <table class="table">
        <thead>
            <tr>
                <th>
                    Mã đơn hàng
                </th>
                <th>
                    Tên hàng
                </th>
                <th>
                    Kích cỡ
                </th>
                <th>
                    Số lượng
                </th>
                <th>
                    Giá 1 đơn vị
                </th>
                <th>
                    Tổng đơn hàng
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var items in OrderDetails)
            {
                <tr>
                    <td>@items.OrderId</td>
                    <td>@Products.FirstOrDefault(x => x.Id == items.ProductId).Title</td>
                    <td>@items.Size</td>
                    <td>@items.Quantity</td>
                    <td>@items.Price</td>
                    <td>@items.TotalPrice</td>
                </tr>
            }
        </tbody>
    </table>
</div>*@
<RadzenText Text="Tạm thời để đây nếu có thời gian sẽ tích hợp api giao hàng nhanh"></RadzenText>
<RadzenSteps>
   
    <Steps>
        <RadzenStepsItem Text="Xác nhận thông tin">
            hiện các thông tin 
        </RadzenStepsItem>

        <RadzenStepsItem Text="Chuyển qua đơn vị giao hàng nhanh">
            hiện các thông tin
        </RadzenStepsItem>

        <RadzenStepsItem Text="GHN đã tiếp nhận">
            hiện các thông tin
        </RadzenStepsItem>

        <RadzenStepsItem Text="Đang trong quá trình vận chuyển">
            hiện các thông tin
        </RadzenStepsItem>

        <RadzenStepsItem Text="Hoàn tất đơn hàng">
            hiện các thông tin
        </RadzenStepsItem>
    </Steps>
</RadzenSteps>
@code {
    [Parameter]
    public string orderId { get; set; }
    private List<OrderDetails> OrderDetails { get; set; } = new List<OrderDetails>();
    private List<ProductVM> Products { get; set; } = new List<ProductVM>();

    protected override async Task OnInitializedAsync()
    {
        await GetOrderDetails();
        await GetProducts();
    }

    private async Task GetOrderDetails()
    {
        var pagingResponse = await OrderService.GetOrderDetails(orderId);
        OrderDetails = pagingResponse;
    }
    private async Task GetProducts()
    {
        var pagingResponse = await ProductService.GetAllProducts();
        Products = pagingResponse;
    }
}
